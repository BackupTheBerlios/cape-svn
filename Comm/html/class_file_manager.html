<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Comm: FileManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>FileManager Class Reference</h1><!-- doxytag: class="FileManager" -->
<p>A class to handle data transfers with the filesystem.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_file_manager_8h_source.html">FileManager.h</a>&gt;</code></p>

<p><a href="class_file_manager-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_manager.html#a8afd512c06be9daf140cc19d71f9b391">FileManager</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor for the class.  <a href="#a8afd512c06be9daf140cc19d71f9b391"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_manager.html#a9b00c266d6a279a7fe9d1b18649d93c7">writeBlock</a> (int sessionId, int blockId, int length, uchar *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes a block of file data to the filesystem.  <a href="#a9b00c266d6a279a7fe9d1b18649d93c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_manager.html#aa4e29db00b18f76e9077ccfae86ead2e">readBlock</a> (uchar sessionId, uchar blockId)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads a block of data from the filesystem.  <a href="#aa4e29db00b18f76e9077ccfae86ead2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_manager.html#ab6fdba3fb4643d07e387f67d46f264f2">startSession</a> (string fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Opens a file transfer session.  <a href="#ab6fdba3fb4643d07e387f67d46f264f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_manager.html#a789e8afe9bb1d763e86e9bb97c48bff2">endSession</a> (int sessionId)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes a file transfer session.  <a href="#a789e8afe9bb1d763e86e9bb97c48bff2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file_manager.html#abaed33b5b0c13b8a597db9335a1aacfa">~FileManager</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Standard destructor.  <a href="#abaed33b5b0c13b8a597db9335a1aacfa"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Will be used to perform reads and writes to an SD card on the CDH subsystem. Mutual exclusion must be enforced to avoid race conditions which may occur due to the multithreaded approach of our implementation. </p>

<p>Definition at line <a class="el" href="_file_manager_8h_source.html#l00041">41</a> of file <a class="el" href="_file_manager_8h_source.html">FileManager.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8afd512c06be9daf140cc19d71f9b391"></a><!-- doxytag: member="FileManager::FileManager" ref="a8afd512c06be9daf140cc19d71f9b391" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileManager::FileManager </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes POSIX lock, creates the session file if it does not already exist, or recovers session data from a pre-existing session file. </p>

<p>Definition at line <a class="el" href="_file_manager_8c_09_09_source.html#l00016">16</a> of file <a class="el" href="_file_manager_8c_09_09_source.html">FileManager.c++</a>.</p>

</div>
</div>
<a class="anchor" id="abaed33b5b0c13b8a597db9335a1aacfa"></a><!-- doxytag: member="FileManager::~FileManager" ref="abaed33b5b0c13b8a597db9335a1aacfa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileManager::~FileManager </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes all dynamically allocated memory. </p>

<p>Definition at line <a class="el" href="_file_manager_8c_09_09_source.html#l00244">244</a> of file <a class="el" href="_file_manager_8c_09_09_source.html">FileManager.c++</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a789e8afe9bb1d763e86e9bb97c48bff2"></a><!-- doxytag: member="FileManager::endSession" ref="a789e8afe9bb1d763e86e9bb97c48bff2" args="(int sessionId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileManager::endSession </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sessionId</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes the session from the session file and sends a response regarding if any errors were encountered in the procedure. </p>

<p>Definition at line <a class="el" href="_file_manager_8c_09_09_source.html#l00180">180</a> of file <a class="el" href="_file_manager_8c_09_09_source.html">FileManager.c++</a>.</p>

</div>
</div>
<a class="anchor" id="aa4e29db00b18f76e9077ccfae86ead2e"></a><!-- doxytag: member="FileManager::readBlock" ref="aa4e29db00b18f76e9077ccfae86ead2e" args="(uchar sessionId, uchar blockId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileManager::readBlock </td>
          <td>(</td>
          <td class="paramtype">uchar&nbsp;</td>
          <td class="paramname"> <em>sessionId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&nbsp;</td>
          <td class="paramname"> <em>blockId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads a block of a file as specified by the parameters.</p>
<p>This is done through the use of a lock to ensure mutual exclusion. The data read from the file will be sent to the communication interface to be transmitted. </p>

<p>Definition at line <a class="el" href="_file_manager_8c_09_09_source.html#l00095">95</a> of file <a class="el" href="_file_manager_8c_09_09_source.html">FileManager.c++</a>.</p>

</div>
</div>
<a class="anchor" id="ab6fdba3fb4643d07e387f67d46f264f2"></a><!-- doxytag: member="FileManager::startSession" ref="ab6fdba3fb4643d07e387f67d46f264f2" args="(string fileName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileManager::startSession </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates an entry in the session file to begin a file transfer.</p>
<p>The name of the file as well as the ID for the session will be stored in the session file, and then a response is created and sent to the communication interface for transmission. Note that only 20 sessions may exist at any given time. </p>

<p>Definition at line <a class="el" href="_file_manager_8c_09_09_source.html#l00105">105</a> of file <a class="el" href="_file_manager_8c_09_09_source.html">FileManager.c++</a>.</p>

</div>
</div>
<a class="anchor" id="a9b00c266d6a279a7fe9d1b18649d93c7"></a><!-- doxytag: member="FileManager::writeBlock" ref="a9b00c266d6a279a7fe9d1b18649d93c7" args="(int sessionId, int blockId, int length, uchar *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FileManager::writeBlock </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sessionId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>blockId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write length bytes from data to the location corresponding to blockId in the file associated with sessioId.</p>
<p>This file access ensures mutual exclusion through the use of a POSIX thread lock. After the operation is performed, a response is created and sent to the communication interface for transmission. </p>

<p>Definition at line <a class="el" href="_file_manager_8c_09_09_source.html#l00059">59</a> of file <a class="el" href="_file_manager_8c_09_09_source.html">FileManager.c++</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/jeremy/NetBeansProjects/Comm/<a class="el" href="_file_manager_8h_source.html">FileManager.h</a></li>
<li>/home/jeremy/NetBeansProjects/Comm/<a class="el" href="_file_manager_8c_09_09_source.html">FileManager.c++</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Sat Nov 20 10:37:57 2010 for Comm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
